<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<title>测试插入数据</title>
	<link rel="stylesheet" href="/package/layui-v2.4.2/css/layui.css">
	<link rel="stylesheet" href="/css/project.css">
	<link rel="stylesheet" href="/css/productionReport/purificationScheme/sitePureScheme.css">
	<script type="text/javascript" src="/package/layui-v2.4.2/layui.all.js"></script>
	<script type="text/javascript" src="/package/jquery-3.3.1/jquery-3.3.1.min.js"></script>
	<script type="text/javascript" src="/package/own/universal.js"></script>
	<script type="text/javascript" src="/javaScript/project.js"></script>
</head>
<body>
	
	<div class="layui-fluid "> 	   	
			<!-- 搜索条件 -->
		<div class="layui-row layui-col-space15">			
	   		<div class="layui-col-md12 " > 
	   			<fieldset >
					<legend>查询条件</legend>	
						<div class="layui-form-item">
							<div class="layui-inline">
								<label class="layui-form-label" style="width:200px">
									输入测试条数：
								</label>
						     	<div class="layui-input-inline">
							       	<input type="text" class="layui-input" id="testDataNum"
						        		placeholder="" style="width:100px">
						     	</div>
							</div>						   
							<div class="layui-inline" id="generateTestData">
								<button class="layui-btn">
				  					<i class="layui-icon">&#xe615;</i> 生成数据
								</button>
					   		</div>
					   		<div class="layui-inline" id="testData">
								<button class="layui-btn">
				  					<i class="layui-icon">&#xe60a;</i> 测试
								</button>
					   		</div>	
  						</div>
				</fieldset>
	   		</div>
	   	</div>		   
	</div>
	
	<!-- js -->
	<script type="text/javascript">
		$(function(){
			/*
			 * 参数定义
			 */
			var layer = layui.layer,
			//测试数据容器
			testDataArr = [],
			//测试url
			testUrl = ipPort + "/inspectionValue";
			 
			/*
			 * 事件绑定
			 */
			 //生成测试数据按钮-单击事件
			$( '#generateTestData' ).on( 'click', generateDataEve );
			//测试数据按钮-单击事件	
			$( '#testData' ).on( 'click', testDataEve );
			
			
		 	/*
		  	 * 生成测试数据按钮-单击事件函数
		  	 */
			function generateDataEve(){
				 console.log( '生成测试数据按钮-单击事件函数……' );
				 //检查数据
				 var numStr = $.trim( $( '#testDataNum' ).val() );
				 if( !numStr || !parseInt( numStr ) ){
					 layer.msg( '请输入测试数据条数', {icon:3} );
					 return;
				 }
				 
				 //生成数据
				 var num = parseInt( numStr ) ;
				 console.log( '生成测试数据按钮-单击事件函数……num:' + num );
				 for( var i = 0; i < num; i++ ){
					 var testData = {};
					 testData["plan_id"] = Math.uuid( 30, 16 ) + "";
					 testData["record_time"] = new Date();
					 testData["position_num"] = Math.uuid( 6, 10 ) + "";
					 testData["value"] = Math.ceil( Math.random()*10000 ) + "";
					 testData["unit"] = "%";
					 testData["remark1"] = Math.ceil( Math.random()*100 ) + "";
					 testData["remark2"] = Math.ceil( Math.random()*100 ) + "";
					 testDataArr.push( testData );
				 }
				 console.log( testDataArr[0] ); 
			 }
		 	
			/*
		  	 * 测试数据按钮-单击事件函数
		  	 */
			function testDataEve(){
				 console.log( '测试数据按钮-单击事件函数……' );
				 
				 //请求
				 $.ajax({
				     type : "POST",
				     url : testUrl,
				     data : JSON.stringify( testDataArr ),
				     contentType : "application/json;charset=utf-8",
				     dataType : "json",
				     success : testSuccFunc,
				     error : function(){
				    	 layer.msg('请求失败');
				     }		       
			 	})
			}
			
			/*
		  	 * 测试数据按钮-单击事件函数回调函数
		  	 */
		  	 function testSuccFunc( jsonData ){
		  		console.log( ' 测试数据按钮-单击事件函数回调函数……' );
		  		if( jsonData ){
		  			var data = jsonData.data;
		  			if( jsonData.state == 0 || data ){
		  				console.log( data );
		  			}
		  		}else{
		  			 layer.msg( '请求失败', {icon:2} );
		  		}		  		
			}
			
		})				 
	</script>
</body>
</html>			