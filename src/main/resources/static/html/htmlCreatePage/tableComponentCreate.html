<!DOCTYPE html>
<html style="height: 100%">
<head>
    <meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<title>表格组件生成</title>
    <link rel="stylesheet" href="/package/layui-2.2.5/css/layui.css">
    <link rel="stylesheet" href="/css/tableCreate.css">
    	<!-- js书写 -->
	<script type="text/javascript" src="/package/layui-2.2.5/layui.all.js"></script>
	<script type="text/javascript" src="/package/jquery-3.3.1/jquery-3.3.1.min.js"></script>
	<script type="text/javascript" src="/javaScript/universal.js"></script>
	<script type="text/javascript" src="/javaScript/tableCreate.js"></script>
</head>
<body>
	<div class="layui-fluid"> 		
		<div class="layui-row layui-col-space20">
			<!-- 布局左侧 -->
	   		<div class="layui-col-md8 layui-col text-div-left">
				<div class="layui-row">		
					<div class="layui-col-md12 page_html" id="text_content_one" style="overflow:auto">
						
						<script type="text/javascript" id='tableScript' layType="onlyJs">		
							$('<table class="layui-hide" id="table" lay-filter="table"></table>')
								.appendTo($('#tableScript').parent());
							
							$(function(){
								//动态生成table的cols属性
								var col = [{type: 'numbers',title: '序号', fixed: 'left',  minWidth: 80, align:'center'}];
								$.each(global[$('#tableScript').parent().attr('id')].tableHeadField, function(index, item){ 
									var tempJson = {
											field: item, title: global[$('#tableScript').parent().attr('id')].tableHeadTitle[index], unresize:true,
											minWidth: global[$('#tableScript').parent().attr('id')].tableHeadWidth[index], sort: false,
											align:global[$('#tableScript').parent().attr('id')].tableHeadAlign[index], templet: '#'+item
									}
									col.push(tempJson);
								})
								console.log(col); 
								
								//发送请求加载表格
								var options = table.render({
								    elem: '#table',
								    url: global[$('#tableScript').parent().attr('id')].tableDataUrl,
								    method: 'get',
								    //width: '100%',
								    height: 150,
								    where: {}, 
								    request: {
							    		pageName: 'curr', //页码的参数名称，默认：page
							    		limitName: 'size' //每页数据量的参数名，默认：limit
							    	},
							    	response: {
										statusName: 'state', //数据状态的字段名称，默认：code
										statusCode: 0 ,//成功的状态码，默认：0
										msgName: 'message', //状态信息的字段名称，默认：msg
										countName: 'total', //数据总数的字段名称，默认：count
										dataName: 'data'//数据列表的字段名称，默认：data
									},      				
								    cols: [ col ],
						            done: function (res, curr, count) { 
						            	var $current = $('#tableScript').parent().find('table').next();
						            	$current.css({ 'border': '0px yellow solid' });//去掉表格边框线
						            	$current.css({'margin-left': global[$('#tableScript').parent().attr('id')].tableLeft, 'margin-right': global[$('#tableScript').parent().attr('id')].tableRight, 'margin-top': global[$('#tableScript').parent().attr('id')].tableTop});//表格左右边距
						            	$current.find('.layui-table-cell').css( {'height': global[$('#tableScript').parent().attr('id')].tableRowHeight , 'line-height': global[$('#tableScript').parent().attr('id')].tableRowHeight });//修改行高	            	
						            	$current.find('thead th').css( {'font-size':global[$('#tableScript').parent().attr('id')].tableHeadFontSize, 'font-family':global[$('#tableScript').parent().attr('id')].tableHeadFontFamily});//修改表头字体大小类型	
						            	$current.find('tr:even:not(:first)').css({ 'color': global[$('#tableScript').parent().attr('id')].tableBodyFontColor});//修改奇数背景色、字体颜色				
						            	$current.find('tr:even').css({'background-color': global[$('#tableScript').parent().attr('id')].tableBodyEvenBackgroundColor});//修改奇数背景色
						            	$current.find('tr:odd').css({'background-color': global[$('#tableScript').parent().attr('id')].tableBodyOddBackgroundColor, 'color': global[$('#tableScript').parent().attr('id')].tableBodyFontColor});//修改偶数行背景色、字体颜色
						            	$current.find('td').css({'font-size': global[$('#tableScript').parent().attr('id')].tableBodyFontSize, 'font-family': global[$('#tableScript').parent().attr('id')].tableBodyFontFamily});//修改表格内容的字体类型和大小
						            	$current.find('.layui-table-fixed .layui-table-header span').css( {'color':  global[$('#tableScript').parent().attr('id')].tableHeadFontColor});//修改编号的颜色
						            	$current.find('.layui-table-box .layui-table-header').css({'border-width' : '0 0 0px'});//取消表头分割线
						            	$current.find('thead tr').css( {'background-color': global[$('#tableScript').parent().attr('id')].tableHeadBackgroundColor, 'color':global[$('#tableScript').parent().attr('id')].tableHeadFontColor });//修改表头字体颜色
						            	$current.find('.layui-table-page').css({'background-color':global[$('#tableScript').parent().attr('id')].tableBodyEvenBackgroundColor, 'border': '0px yellow solid' });
						            },
								    skin: 'nob' ,//表格风格
								   	even: true,//开启隔行背景
								    loading: true,
								    page: global[$('#tableScript').parent().attr('id')].isShowPage, //是否显示分页
								    limits: [3, 4, 5, 6, 8, 10],
								    limit: 5 //每页默认显示的数量
								});	
							});		
						</script>
						<script type="text/javascript" id='tableScriptTemplate' layType="onlyJs">	
							console.log(global);
							var tempData = global[$('#tableScript').parent().attr('id')];
							console.log(tempData);
							console.log(global[$('#tableScript').parent().attr('id')]);
							//动态生成表格列的样式模板
							$.each(global[$('#tableScript').parent().attr('id')].tableClosContentType, function(index, item){
								if(item == '1'){ 
									var tempScriptObj = document.createElement('script');
									$(tempScriptObj).attr('id', tempData.tableHeadField[index]);
									$(tempScriptObj).attr('type', 'text/html');
									$(tempScriptObj).html(
											'{{#    ' +	
											'	var fn = function(){         ' +
											'		var returnValue = 0;     ' +
											'		$.each(tempData.tableClosContentJudge, function(index, item){    ' +
											'			if(item.name == "' + tempData.tableHeadField[index] + '"){		  ' +		
											'				returnValue = index;	                  ' +					
											'			}	              ' +			
											'		});		              ' +	
											'		return returnValue;	  ' +	
									  		'	};	                      ' +	 
											'}}	                          ' +	
											'{{# 	  ' +	
											'	var num = fn();	  ' +	
											'	$.each(tempData.tableClosContentJudge[num].value, function(index1, item1){  	  ' +	
											'}}	      ' +	
											'	{{#   if(d.' + tempData.tableHeadField[index] + ' == item1) { }}	  ' +	
									    	'		<span style="color:{{tempData.tableClosContentColor[num].value[index1]}}">	  ' +	
											'			 {{ d.' + tempData.tableHeadField[index] + '}}	  ' +	
											'		</span>	  ' +	
											'	{{#  }  }}	  ' +	
											'{{#  }) }}	  ' 	
									).appendTo($('#tableScript').parent());
								} else if(item == '2'){
									var tempScriptObj = document.createElement('script');
									$(tempScriptObj).attr('id', tempData.tableHeadField[index]);
									$(tempScriptObj).attr('type', 'text/html');
									$(tempScriptObj).html(
											'{{#    ' +	
											'	var fn = function(){         ' +
											'		var returnValue = 0;     ' +
											'		$.each(tempData.tableClosContentJudge, function(index, item){    ' +
											'			if(item.name == "' + tempData.tableHeadField[index] + '"){		  ' +		
											'				returnValue = index;	                  ' +					
											'			}	              ' +			
											'		});		              ' +	
											'		return returnValue;	  ' +	
									  		'	};	                      ' +	 
											'}}	                          ' +	
											'{{# 	  ' +	
											'	var num = fn(); ' +	
											'	$.each(tempData.tableClosContentJudge[num].value, function(index1, item1){  	  ' +	
											'}}	      ' +	
											'	{{#   if(d.' + tempData.tableHeadField[index] + ' == item1) { }}	  ' +	
											'		<span style="background-color:{{ tempData.tableClosContentColor[num].value[index1] }};	  ' +
											'			 color: {{ tempData.tableBodyFontColor }};padding:5px 10px 5px 10px;">	  ' +	
											'			 {{ d.' + tempData.tableHeadField[index] + '}}	  ' +	
											'		</span>	  ' +
											'	{{#  }  }}	  ' +	
											'{{#  }) }}	  ' 	
									).appendTo($('#tableScript').parent());
								}
							});
						</script>
					</div>
					<div class="layui-col-md12" id="text_content_two">
						<div class="layui-form-item" id="text_content_two_button">
							<div class="layui-input-block" >
								<button class="layui-btn layui-btn-fluid" style="height:60px;font-size: 1.4rem;
									font-family: "黑体"; >
									导 出 组 件 HTML
								</button>
							</div>
						</div>
					</div>
				</div>
			</div>
			
			<!-- 布局右侧 -->
	   		<div class="layui-col-md4 layui-col text-div-right">
				<form class="layui-form" action="">
					<div class="layui-row" id="text_content_three">	
						<!-- 标题 -->
						<div class="layui-col-md12"  id="text_content_three_type">	
							<label style="display:inline-block;padding-top: 5px;">属 性 编 辑 区</label>
						</div>
						<!-- 表单 -->
						<div class="layui-col-md12" id="text_content_three_form" style="overflow:auto">	
							<div class="layui-tab">
						  		<ul class="layui-tab-title">
								    <li class="layui-this">表格位置</li>
								    <li>表头样式</li>
								    <li>行样式</li>
								    <li>列样式</li>
						 		</ul>
							  	<div class="layui-tab-content">
							  		<!-- whole table  -->
								    <div class="layui-tab-item layui-show">
										<div class="layui-form-item">
											<label class="layui-form-label" style="width:100px">左边距:</label>
											<div class="layui-input-inline" style="width:100px">
												<input type="text" name="tableLeft" required lay-verify="tagValue" placeholder="10px" autocomplete="off" class="layui-input" value="10px">
											</div>
											<div class="layui-form-mid layui-word-aux" style="width:130px">格式：80px 100%</div>
										</div>
										<div class="layui-form-item">
											<label class="layui-form-label"  style="width:100px">上边距:</label>
											<div class="layui-input-inline" style="width:100px">
												<input type="text" name="tableTop" required lay-verify="tagValue" placeholder="10px" autocomplete="off" class="layui-input" value="10px">
											</div>
											<div class="layui-form-mid layui-word-aux" style="width:130px">格式：80px 100%</div>
										</div>														
										<div class="layui-form-item">
											<label class="layui-form-label"  style="width:100px">宽度:</label>
											<div class="layui-input-inline" style="width:100px">
												<input type="text" name="tableWidth" required lay-verify="tagValue" placeholder="400px" autocomplete="off" class="layui-input" value="400px">
											</div>
											<div class="layui-form-mid layui-word-aux" style="width:130px">格式：80px 100%</div>
										</div>
										<div class="layui-form-item">
											<label class="layui-form-label"  style="width:100px">高度:</label>
											<div class="layui-input-inline" style="width:100px">
												<input type="text" name="tableHeight" required lay-verify="tagValue" placeholder="135%" autocomplete="off" class="layui-input" value="135%">
											</div>
											<div class="layui-form-mid layui-word-aux" style="width:130px">格式：80px 100%</div>
										</div>
										<div class="layui-form-item">
											<label class="layui-form-label"  style="width:100px">显示分页:</label>
											<div class="layui-input-inline" style="width:100px">
												<input type="text" name="isShowPage" required lay-verify="" placeholder="false" 
														autocomplete="off" class="layui-input" value="false">
											</div>
										    <div class="layui-form-mid layui-word-aux" style="width:130px">格式：true false</div>
										</div>
									</div>
									
									<!-- table head -->
									<div class="layui-tab-item ">
										<div class="layui-form-item">
											<label class="layui-form-label" style="width:100px">数据链接:</label>
											<div class="layui-input-inline" style="width:250px">
												<input type="text" name="tableDataUrl" required lay-verify="" placeholder="/html/analogData/tableJsonTest.html" 
													autocomplete="off" class="layui-input" value="/html/analogData/tableJsonTest.html">
											</div>
										</div>
										<div class="layui-form-item">
											<label class="layui-form-label"  style="width:100px">表头名称:</label>
											<div class="layui-input-inline" style="width:260px">
												<input type="text" name="tableHeadTitle" required lay-verify="" placeholder="项目名称,开发日期,截止日期,事件类型,状态" 
												autocomplete="off" class="layui-input" value="项目名称,开发日期,截止日期,事件类型,状态">
											</div>
										</div>
										<div class="layui-form-item">
											<label class="layui-form-label"  style="width:100px">数据字段:</label>
											<div class="layui-input-inline" style="width:260px">
												<input type="text" name="tableHeadField" required lay-verify="" placeholder="project_name,project_begin_date,project_end_date,project_event_type,project_state" 
													autocomplete="off" class="layui-input" value="project_name,project_begin_date,project_end_date,project_event_type,project_state">
											</div>
										</div>														
										<div class="layui-form-item">
											<label class="layui-form-label"  style="width:100px">最小宽度:</label>
											<div class="layui-input-inline" style="width:100px">
												<input type="text" name="tableHeadWidth" required lay-verify="" placeholder="150px" 
														autocomplete="off" class="layui-input" value="150,150,150,150,150">
											</div>
											<div class="layui-form-mid layui-word-aux" style="width:130px">格式：80,80,80</div>
										</div>
										<div class="layui-form-item">
											<label class="layui-form-label"  style="width:100px">字体大小:</label>
											<div class="layui-input-inline" style="width:100px">
												<input type="text" name="tableHeadFontSize" required lay-verify="tagValue" placeholder="14px"
														autocomplete="off" class="layui-input" value="14px">
											</div>
											<div class="layui-form-mid layui-word-aux" style="width:130px">格式：80px</div>
										</div>
										<div class="layui-form-item">
											<label class="layui-form-label"  style="width:100px">字体类型:</label>
											<div class="layui-input-inline" style="width:100px">
												<input type="text" name="tableHeadFontFamily" required lay-verify="" placeholder="华文仿宋"
														 autocomplete="off" class="layui-input" value="华文仿宋">
											</div>
											<div class="layui-form-mid layui-word-aux" style="width:130px">格式：</div>
										</div>
										<div class="layui-form-item">
											<label class="layui-form-label"  style="width:100px">文字颜色:</label>
											<div class="layui-input-inline" style="width:100px">
												<input type="text" name="tableHeadFontColor" required lay-verify="" placeholder="#60D4F5" 
														autocomplete="off" class="layui-input" value="#60D4F5">
											</div>
											<div class="layui-form-mid layui-word-aux" style="width:130px">格式：red #666666</div>
										</div>
										<div class="layui-form-item">
											<label class="layui-form-label"  style="width:100px">背景颜色:</label>
											<div class="layui-input-inline" style="width:100px">
												<input type="text" name="tableHeadBackgroundColor" required lay-verify="" placeholder="#00104E" 
														autocomplete="off" class="layui-input" value="#00104E">
											</div>
											<div class="layui-form-mid layui-word-aux" style="width:130px">格式：red #666666</div>
										</div>
									</div>		
									
									<!-- table row  -->					
								    <div class="layui-tab-item">
								    	<div class="layui-form-item">
											<label class="layui-form-label"  style="width:100px">行高:</label>
											<div class="layui-input-inline" style="width:100px">
												<input type="text" name="tableRowHeight" required lay-verify="tagValue" placeholder="20px"
														autocomplete="off" class="layui-input" value="20px">
											</div>
											<div class="layui-form-mid layui-word-aux" style="width:130px">格式：80px</div>								    	
										</div>
								    	<div class="layui-form-item">
											<label class="layui-form-label"  style="width:100px">各行字体大小:</label>
											<div class="layui-input-inline" style="width:100px">
												<input type="text" name="tableBodyFontSize" required lay-verify="tagValue" placeholder="14px" 
														autocomplete="off" class="layui-input" value="14px">
											</div>
											<div class="layui-form-mid layui-word-aux" style="width:130px">格式：80px</div>
										</div>
										<div class="layui-form-item">
											<label class="layui-form-label"  style="width:100px">各行字体类型:</label>
											<div class="layui-input-inline" style="width:100px">
												<input type="text" name="tableBodyFontFamily" required lay-verify="" placeholder="华文仿宋" 
														autocomplete="off" class="layui-input" value="华文仿宋">
											</div>
											<div class="layui-form-mid layui-word-aux" style="width:130px">格式：华文仿宋</div>
										</div>
										<div class="layui-form-item">
											<label class="layui-form-label"  style="width:100px">各行文字颜色:</label>
											<div class="layui-input-inline" style="width:100px">
												<input type="text" name="tableBodyFontColor" required lay-verify="" placeholder="#FFFFFF" 
														autocomplete="off" class="layui-input" value="#FFFFFF">
											</div>
											<div class="layui-form-mid layui-word-aux" style="width:130px">格式：red #666666</div>
										</div>
										<div class="layui-form-item">
											<label class="layui-form-label" style="width:120px">奇数行背景颜色:</label>
											<div class="layui-input-inline" style="width:100px">
												<input type="text" name="tableBodyEvenBackgroundColor" required lay-verify="" placeholder="#00104E" 
														autocomplete="off" class="layui-input" value="#00104E">
											</div>
											<div class="layui-form-mid layui-word-aux" style="width:130px">格式：red #FFFFFF</div>
										</div>
										<div class="layui-form-item">
											<label class="layui-form-label" style="width:120px">偶数行背景颜色:</label>
											<div class="layui-input-inline" style="width:100px">
												<input type="text" name="tableBodyOddBackgroundColor" required lay-verify="" placeholder="#051958" 
														autocomplete="off" class="layui-input" value="#051958">
											</div>
											<div class="layui-form-mid layui-word-aux" style="width:130px">格式：red #FFFFFF</div>
										</div>
									</div>
									
									<!-- table col -->					
								    <div class="layui-tab-item">
								    	<div class="layui-form-item">
    										<label class="layui-form-label">列样式字段:</label>
											<div class="layui-input-block" id="checkboxStyle">
											</div>
										</div>										
									</div>
							 	</div>
							</div>																										
						</div>
						<!-- 按钮 -->
						<div class="layui-col-md12"  id="text_content_three_button" style="height:0px;display:none">	
							<div class="layui-form-item">
								<div class="layui-input-block" >
									<button class="layui-btn" lay-submit lay-filter="save" id="text_content_three_save">保存</button>
									<button type="reset" class="layui-btn layui-btn-primary">重置</button>
								</div>
							</div>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>

	
</body>
</html>